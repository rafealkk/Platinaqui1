<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ER</title>
    <style>
        /* RESET E CONFIGURAÇÕES GERAIS */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background-color: #000000;
            color: white;
            font-family: Arial, sans-serif;
            min-height: 100vh;
        }

        /* FONTE PERSONALIZADA */
        @font-face {
            font-family: "Mantinia";
            src: url("/CSS/Mantinia Regular.otf");
        }

        h1 {
            color: rgb(255, 196, 0);
            font-family: "Mantinia";
        }

        a {
            color: white;
            text-decoration: none;
        }

        /* HEADER */
        .cabecalho {
            display: flex;
            align-items: center;
            padding: 15px 20px;
            background-color: #111111;
            border-bottom: 1px solid #333;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            margin-left: 50px;
        }

        #logo {
            width: 75px;
            height: auto;
        }

        .cabecalho h1 {
            margin-left: 15px;
        }

        /* BARRA DE PESQUISA */
        .search-container {
            display: flex;
            align-items: center;
            border: 2.5px solid gray;
            border-radius: 20px;
            padding: 5px 15px;
            margin-left: auto;
            margin-right: 20px;
            width: 300px;
            background: #000;
        }

        .search-container input[type="text"] {
            border: none;
            outline: none;
            flex-grow: 1;
            padding: 8px;
            background: transparent;
            color: white;
            font-size: 14px;
        }

        .search-container button {
            background: none;
            border: none;
            cursor: pointer;
            padding: 0;
        }

        .search-container button img {
            width: 20px;
            height: 20px;
            filter: invert(100%);
        }

        /* BARRA LATERAL ESQUERDA */
        nav {
            width: 50px;
            height: 100vh;
            background-color: #1d1d1d;
            position: fixed;
            left: 0;
            top: 0;
            z-index: 900;
            padding: 80px 0 20px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .barra-lateral1, .barra-lateral2 {
            display: flex;
            flex-direction: column;
            gap: 20px;
            align-items: center;
        }

        .barra-lateral1{
            margin-top: -115%;
        }

        #item{
            height: 50px;
            filter: invert(50%);
            transition: filter 0.3s ease;
        }

        #item:hover {
            filter: invert(100%);
        }

       /* BOTÃO CRIAR - CORRIGIDO */
.criar {
    position: fixed;
    top: 9%; /* Ajustado para ficar abaixo do header */
    right: 85%;
    z-index: 1100; /* Aumentado para ficar acima de tudo */
    display: flex;
    align-items: center;
    gap: 8px;
    background: #1d1d1d;
    padding: 8px 15px;
    border-radius: 20px;
    border: 1px solid #333;
    transition: all 0.3s ease;
}

.criar:hover {
    background: #2d2d2d;
    border-color: #ffc400;
}

.criar img {
    filter: invert(50%);
    width: 20px;
    height: 20px;
    transition: filter 0.3s ease;
}

.criar:hover img {
    filter: invert(100%);
}

.criar h2 {
    color: gray;
    font-size: 14px;
    margin: 0;
    transition: color 0.3s ease;
}

.criar:hover h2 {
    color: #ffc400;
}
        /* CONTEÚDO PRINCIPAL */
        .conteudo-principal {
            display: grid;
            grid-template-columns: 1fr 300px;
            gap: 20px;
            margin: 120px 20px 20px 70px;
            min-height: calc(100vh - 100px);
        }

        /* POSTS */
        article {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .publicações {
            display: flex;
            background: #1d1d1d;
            border: 1px solid #333;
            border-radius: 10px;
            padding: 15px;
            gap: 15px;
            transition: transform 0.2s ease;
        }

        .publicações:hover {
            transform: translateY(-2px);
            border-color: #555;
        }

        .imagem-publicaçoes img {
            width: 120px;
            height: 120px;
            object-fit: cover;
            border-radius: 8px;
        }

        .publicações1 {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .publicações1 h2 {
            color: #ffc400;
            font-size: 18px;
            margin-bottom: 5px;
        }

        .content {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        /* DETALHES/SUMMARY */
        details {
            background: #2d2d2d;
            border-radius: 8px;
            padding: 10px;
        }

        summary {
            cursor: pointer;
            list-style: none;
            color: white;
            font-weight: bold;
            position: relative;
            padding-left: 20px;
        }

        summary::-webkit-details-marker {
            display: none;
        }

        summary::before {
            content: "▶";
            position: absolute;
            left: 0;
            transition: transform 0.2s ease;
        }

        details[open] summary::before {
            transform: rotate(90deg);
        }

        details p {
            margin-top: 10px;
            color: #ccc;
            line-height: 1.4;
        }

        /* INTERAÇÕES */
        .negocios {
            display: flex;
            gap: 15px;
            margin-top: 10px;
        }

        .negocios img {
            filter: invert(100%);
            width: 24px;
            height: 24px;
            cursor: pointer;
            transition: transform 0.2s ease;
        }

        .negocios img:hover {
            transform: scale(1.1);
        }

        .opçoes {
            align-self: flex-start;
        }

        .opçoes img {
            filter: invert(100%);
            width: 20px;
            height: 20px;
            cursor: pointer;
        }

        /* ASIDE LATERAL DIREITA */
        aside {
            background: #1d1d1d;
            border-left: 1px solid #333;
            padding: 20px;
            height: calc(100vh - 100px);
            position: sticky;
            top: 80px;
            overflow-y: auto;
            border-radius: 10px 0 0 10px;
        }

        /* Scrollbar customizada para o aside */
        aside::-webkit-scrollbar {
            width: 6px;
        }

        aside::-webkit-scrollbar-track {
            background: #1a1a1a;
            border-radius: 3px;
        }

        aside::-webkit-scrollbar-thumb {
            background: #444;
            border-radius: 3px;
        }

        aside::-webkit-scrollbar-thumb:hover {
            background: #555;
        }

        aside {
            scrollbar-width: thin;
            scrollbar-color: #444 #1a1a1a;
        }

        .img {
            text-align: center;
            margin-bottom: 20px;
        }

        .img img {
            width: 200px;
            height: 200px;
            border-radius: 10px;
            border: 2px solid #ffc400;
        }

        aside h2 {
            text-align: center;
            color: #ffc400;
            margin-bottom: 20px;
            font-size: 24px;
        }

        aside hr {
            border: none;
            height: 1px;
            background: #333;
            margin: 20px 0;
        }

        aside h3 {
            color: #ffc400;
            margin-bottom: 10px;
            font-size: 16px;
        }

        .goleiro {
            color: #ccc;
            line-height: 1.5;
            text-align: center;
            padding: 0 10px;
        }

        aside ul {
            list-style: none;
            padding-left: 20px;
        }

        aside li {
            color: #ccc;
            margin-bottom: 8px;
            position: relative;
        }

        aside li::before {
            content: "•";
            color: #ffc400;
            position: absolute;
            left: -15px;
        }

        /* CONQUISTAS */
        .achievements {
            display: flex;
            flex-direction: column;
            gap: 12px;
            max-height: 400px;
        }

        .achievement-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 10px;
            background: #2d2d2d;
            border-radius: 8px;
            border-left: 3px solid #ffc400;
            transition: background 0.2s ease;
        }

        .achievement-item:hover {
            background: #333;
        }

        .achievement-item img {
            width: 50px;
            height: 50px;
            object-fit: cover;
            border-radius: 6px;
        }

        .achievement-item p {
            color: #ccc;
            font-size: 14px;
            margin: 0;
            flex: 1;
        }

        .separacao {
            height: 1px;
            background: #333;
            margin: 5px 0;
        }

        /* RESPONSIVIDADE */
        @media (max-width: 1024px) {
            .conteudo-principal {
                grid-template-columns: 1fr;
                margin-right: 20px;
            }
            
            aside {
                position: relative;
                top: 0;
                height: auto;
                max-height: 500px;
            }
            
            .criar {
                right: 20px;
            }
        }

        @media (max-width: 768px) {
            .cabecalho {
                flex-wrap: wrap;
                margin-left: 0;
                padding-left: 60px;
            }
            
            .search-container {
                width: 100%;
                margin: 10px 0 0 0;
                order: 3;
            }
            
            .conteudo-principal {
                margin: 120px 10px 20px 60px;
            }
            
            .publicações {
                flex-direction: column;
            }
            
            .imagem-publicaçoes img {
                width: 100%;
                height: 200px;
            }
        }

        @media (max-width: 480px) {
            nav {
                width: 40px;
            }
            
            .conteudo-principal {
                margin-left: 50px;
            }
            
            .criar {
                right: 10px;
                top: 70px;
            }
            
            .criar h2 {
                display: none;
            }
        }
        .opçoes {
    position: relative;
    display: inline-block;
}

.menu-opc {
    display: none;
    position: absolute;
    top: 25px;
    right: 0;
    background: #2d2d2d;
    border: 1px solid #444;
    border-radius: 8px;
    padding: 8px 12px;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
    z-index: 2000;
}

.menu-opc p {
    color: #ccc;
    margin: 5px 0;
    cursor: pointer;
    font-size: 14px;
    transition: color 0.2s ease;
}

.menu-opc p:hover {
    color: #ffc400;
}

    </style>
</head>
<body>
    <header class="cabecalho">
        <a href="index.html">
            <img src="img/Logo_SemFundo.png" alt="Logo" id="logo"> 
        </a> 
        <a href="index.html"><h1>PLATINAQUI</h1></a>

        <form class="search-container">
            <input type="text" id="search-bar" placeholder="Buscar...">
            <button type="submit">
                <img src="img/lupa.png" alt="Buscar">
            </button>
        </form>
    </header>

    <nav class="barra-lateral">
        <div class="barra-lateral1">
            <a href="index.html"><img src="img/Aniket-Suvarna-Box-Regular-Bx-home.512.png" id="item"></a>
            <a href="recentes.html"><img src="img/Aniket-Suvarna-Box-Regular-Bx-time.512.png" id="item"></a>
            <a href="salvos.html"><img src="img/Aniket-Suvarna-Box-Regular-Bx-bookmark.512.png" id="item"></a>
        </div>  
        <div class="barra-lateral2">
            <a href="login.html"><img src="img/Aniket-Suvarna-Box-Regular-Bx-user-circle.512.png" id="item"></a>
            <a href="config.html"><img src="img/Aniket-Suvarna-Box-Regular-Bx-cog.512.png" id="item"></a>
        </div>
    </nav>

    <div class="criar">
        <a href="criar.html"><img src="img/mais.png" alt="criar post"></a>
        <a href="criar.html"><h2>CRIAR</h2></a>
    </div>

    <main class="conteudo-principal">
        <article>
            <!-- Posts serão carregados aqui dinamicamente -->
            
            <!-- Post fixo original -->
            <div class="publicações">
                <div class="imagem-publicaçoes">
                    <img src="img/ER_Achievement-Trophy_Roundtable_Hold.webp" alt="Mesa Redonda">
                </div>
                <div class="publicações1">
                    <h2>Mesa Redonda</h2>
                    <div class="content">
                        <details>
                            <summary><h4>Como Obter:</h4></summary>
                            <p>Chegue na Mesa Redonda</p>
                        </details>
                        <div class="negocios">
                            <img src="img/acima.png" alt="Like">
                            <img src="img/bate-papo.png" alt="Comentarios">
                            <img src="img/marca-paginas.png" alt="salvar">
                        </div>
                    </div>
                </div>
                <div class="opçoes">
                    <img src="img/tres-pontos.png" alt="3 pontos" onclick="toggleOpcoes(event)">
                    <div class="menu-opc">
                      <p onclick="editarPost">Editar</p>
                      <p onclick="excluirPost">Excluir</p>
                    </div>
                  </div>
                  
                        
            </div>
        </article>
        
        <aside>
            <div class="img">
                <img src="img/download (1).jpg" alt="ER">
            </div>
            <h2>Elden Ring</h2>
            <hr>
            <details>
                <summary><h3>Descrição</h3></summary>
                <div class="goleiro">
                    <p>Levante-se, Maculado, e seja guiado pela graça para portar o poder do Anel Prístino e se tornar um Lorde Prístino nas Terras Intermédias.</p>
                </div>
            </details>

            <hr>
            <details>
                <summary><h3>Categorias</h3></summary>
                <ul>
                    <li>Soulslike</li>
                    <li>Mundo Aberto</li>
                    <li>RPG</li>
                    <li>3D</li>
                </ul>
            </details>
            <hr>
            <h3>Conquistas</h3>
            <div class="achievements">
                <div class="achievement-item">
                    <img src="img/ER_Achievement-Trophy_Roundtable_Hold.webp" alt="Mesa Redonda">
                    <p>Mesa-Redonda</p>
                </div>
                <div class="separacao"></div>
               
            </div>
        </aside>
    </main>

    <script>
        // Função para carregar e exibir posts do localStorage
        function carregarPosts() {
            const article = document.querySelector('article');
            if (!article) {
                console.error('Article não encontrado');
                return;
            }
            
            const posts = JSON.parse(localStorage.getItem('postsER')) || [];
            console.log('Posts carregados do localStorage:', posts);
            
            // Limpar posts dinâmicos existentes (mantém os fixos)
            const postsDinamicos = article.querySelectorAll('.post-dinamico');
            postsDinamicos.forEach(post => post.remove());
            
            // Adicionar novos posts
            posts.forEach(post => {
                const postElement = criarElementoPost(post);
                // Inserir no início do article (acima dos posts fixos)
                article.insertBefore(postElement, article.firstChild);
            });
        }
        // Função para abrir/fechar o menu
function toggleOpcoes(event) {
    const menu = event.target.nextElementSibling;
    document.querySelectorAll('.menu-opc').forEach(m => {
        if (m !== menu) m.style.display = 'none';
    });
    menu.style.display = (menu.style.display === 'block') ? 'none' : 'block';
}

// Função para excluir post
function excluirPost(id) {
    if (!confirm("Tem certeza que deseja excluir este post?")) return;

    let posts = JSON.parse(localStorage.getItem('postsER')) || [];
    posts = posts.filter(post => post.id !== id);
    localStorage.setItem('postsER', JSON.stringify(posts));

    carregarPosts();
    alert("Post excluído com sucesso!");
}

// Função para editar post
function editarPost(id) {
    const posts = JSON.parse(localStorage.getItem('postsER')) || [];
    const post = posts.find(p => p.id === id);
    if (!post) return alert("Post não encontrado.");

    // Abre prompts simples (ou você pode criar um modal)
    const novoTitulo = prompt("Novo título:", post.titulo);
    if (novoTitulo === null) return; // cancelado

    const novoConteudo = prompt("Novo conteúdo:", post.conteudo);
    if (novoConteudo === null) return;

    post.titulo = novoTitulo.trim() || post.titulo;
    post.conteudo = novoConteudo.trim() || post.conteudo;

    // Atualiza localStorage
    const index = posts.findIndex(p => p.id === id);
    posts[index] = post;
    localStorage.setItem('postsER', JSON.stringify(posts));

    carregarPosts();
    alert("Post atualizado!");
}

        // Função para criar elemento HTML do post
        function criarElementoPost(post) {
    const postDiv = document.createElement('div');
    postDiv.className = 'publicações post-dinamico';

    const imagemSrc = post.imagem ? post.imagem : 'img/interrogaçao.png';
    const a = post.link || ''; // garante que seja string vazia
    const linkEmbed = a.includes("watch?v=") ? a.replace("watch?v=", "embed/") : a;

    console.log(linkEmbed);

    postDiv.innerHTML = `
        <div class="imagem-publicaçoes">
            <img src="${imagemSrc}" alt="${post.titulo}">
        </div>
        <div class="publicações1">
            <h2>${post.titulo}</h2>
            <div class="content">
                <details>
                    <summary><h4>Como Obter:</h4></summary>
                    <p>${post.conteudo}</p>
                    <p>
                        ${a ? `
                            <iframe width="560" height="315" src="${linkEmbed}"
                                title="YouTube video player" frameborder="0"
                                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                                referrerpolicy="strict-origin-when-cross-origin"
                                allowfullscreen>
                            </iframe>
                        ` : `<em>Sem vídeo disponível.</em>`}
                    </p>
                    <small style="color: #888; font-size: 12px;">Postado em: ${post.data}</small>
                </details>
                <div class="negocios">
                    <img src="img/acima.png" alt="Like" class="btn-like">
                    <img src="img/bate-papo.png" alt="Comentarios" class="btn-comentario">
                    <img src="img/marca-paginas.png" alt="salvar" class="btn-salvar">
                </div>
            </div>
        </div>
        <div class="opçoes">
  <img src="img/tres-pontos.png" alt="3 pontos" onclick="toggleOpcoes(event)">
  <div class="menu-opc">
    <p onclick="editarPost(${post.id})">Editar</p>
    <p onclick="excluirPost(${post.id})">Excluir</p>
  </div>
</div>

    `;

    return postDiv;
}
        // Carregar posts quando a página carregar
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Página ER carregada - iniciando carregamento de posts');
            carregarPosts();
            
            // Debug: verificar localStorage
            console.log('Conteúdo do localStorage postsER:', localStorage.getItem('postsER'));
        });

        // Também carregar posts quando voltar de outra página
        window.addEventListener('pageshow', function(event) {
            console.log('Evento pageshow disparado');
            carregarPosts();
        });

        // Forçar recarregamento quando a página ganhar foco
        window.addEventListener('focus', function() {
            console.log('Página ganhou foco - recarregando posts');
            carregarPosts();
        });

        //Função para opções de posts
        function toggleOpcoes(event) {
    const opcMenu = event.target.nextElementSibling;
    if (opcMenu.style.display === "block") {
        opcMenu.style.display = "none";
    } else {
        // Fecha outros menus abertos antes
        document.querySelectorAll('.menu-opc').forEach(menu => menu.style.display = 'none');
        opcMenu.style.display = "block";
    }
}
         


    </script>
</body>
</html>